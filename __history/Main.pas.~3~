unit Main;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    Button3: TButton;
    mmLinhas: TMemo;
    Button4: TButton;
    lblSOL: TLabel;
    lblDES: TLabel;
    lblAMBOS: TLabel;
    lblSaida: TLabel;
    Label1: TLabel;
    edtVersao: TEdit;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var   arq: TextFile; { declarando a variável "arq" do tipo arquivo texto }
    linha: string;
begin
  if edtVersao.Text = '' then edtVersao.Text := '1024';

  AssignFile(arq, 'c:\Gera\SOL'+edtVersao.Text+'.txt');

  {$I-}         // desativa a diretiva de Input
  Reset(arq);   // [ 3 ] Abre o arquivo texto para leitura
  {$I+}         // ativa a diretiva de Input

  if (IOResult <> 0) // verifica o resultado da operação de abertura
     then mmLinhas.Lines.Add('Erro na abertura do arquivo !!!')
  else begin
// [ 11 ] verifica se o ponteiro de arquivo atingiu a marca de final de arquivo
         while (not eof(arq)) do
         begin
           readln(arq, linha); // [ 6 ] Lê uma linha do arquivo

           mmLinhas.Lines.Add(linha);
         end;

         CloseFile(arq); // [ 8 ] Fecha o arquivo texto aberto
       end;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  lblSOL.Caption   := 'Linhas : 00';
  lblDES.Caption   := 'Linhas : 00';
  lblAmbos.Caption := 'Linhas : 00';
  lblSaida.Caption := 'Linhas : 00';
  edtVersao.Text   := '1024';
  mmLinhas.Clear;
end;

end.
